<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script
      src="https://cdn.tiny.cloud/1/8ekjflkm92kqtpsvk3kipnpefyljxmpkj3ceisptrel255sn/tinymce/6/tinymce.min.js"
      referrerpolicy="origin"
    ></script>
  </head>
  <body>
    <div class="navbar-container">
      <div class="navbar newpost">
        <h1 class="new-post-heading">Update Post</h1>
      </div>
    </div>

    <div class="new-post-container">
      <form action="/post/update/<%=data.id%>" method="POST">
        <div class="post-content">
          <div class="title-input">
            <label for="title">Title:</label>
            <input
              type="text"
              id="title"
              name="title"
              value="<%=data.title  %>"
              required
            />
          </div>
          <div class="descr-input">
            <label for="description">Description:</label>
            <textarea
              type="text"
              id="description"
              name="description"
              cols="30"
              rows="10"
              required
            >
            <%- (data.description)  %> </textarea
            >
          </div>
          <button class="post-btn" type="submit">UPDATE</button>
        </div>
      </form>
    </div>
  </body>
</html>

<script>
  // Initialize TinyMCE
  tinymce.init({
    selector: "#description",
  });
</script>
<script>
  const form = document.querySelector("form");
  const editor = tinymce.get("description");

  form.addEventListener("submit", function (event) {
    if (editor && editor.getContent().trim() === "") {
      event.preventDefault();
      alert("Please provide a description.");
    } else {
      editor.save();
    }
  });
</script>
